(window.webpackJsonpb6917cb1_93a0_4b97_a84d_7cf49975d4ec_0_2_0=window.webpackJsonpb6917cb1_93a0_4b97_a84d_7cf49975d4ec_0_2_0||[]).push([[49],{Ddmm:function(e,t,n){"use strict";n("qkfK");var a,i=n("K9kD");!function(e){e[e.InteractionRequired=10013]="InteractionRequired"}(a||(a={}));var r=function(){function e(e,t){void 0===e&&(e={}),this._dataSource=t.oAuthTokenDataSource}return e.prototype.getToken=function(e,t){var n=new i.Qos({name:"getToken"});return this._dataSource.getToken(e,t).then(function(e){return n.end({resultType:i.ResultTypeEnum.Success}),e},function(e){return n.end({resultType:i.ResultTypeEnum.Failure}),i.Promise.reject(e)})},e.prototype.getInstrumentedToken=function(e,t){var n=new i.Qos({name:"getToken"});return this._dataSource.getInstrumentedToken(e,t).then(function(e){return n.end({resultType:i.ResultTypeEnum.Success}),e},function(e){return n.end({resultType:i.ResultTypeEnum.Failure}),i.Promise.reject(e)})},e}();t.e=r},Gu0Z:function(e,t,n){"use strict";var a,i=n("17wl"),r=function(){function e(){}return e.tokenCacheSessionStorageId="tokenCache",e.aboutToExpireIntervalSeconds=600,e.apiUrl="/_api/SP.OAuth.Token/Acquire",e.retries=3,e.retriableErrorCodes=[10006,10008],e.unexpectedErrorCodeFormat="Expected error code format is <numericCode>, <exception class name>",e.unexpectedTokenMessageFormat="Your token request succeedeed but the token could not be parsed from the response.This is most probably caused by a change in the server response format",e.npmPackageVersion="0.1.5",e}();!function(e){e[e.unknownError=0]="unknownError",e[e.malformedResponseBody=1]="malformedResponseBody",e[e.serverError=2]="serverError"}(a||(a={}));var o=function(e){function t(n,a){var i=e.call(this,a.message)||this;return i.__proto__=t.prototype,i._type=n,i._httpResponseStatus=a.httpResponseStatus,i._cultureName=a.cultureName,i._message=a.message,i._serverErrorCode=a.serverErrorCode,i._correlationId=a.correlationId,i._redirectUrl=a.redirectUrl,i}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverErrorCode",{get:function(){if(this.type!==a.serverError)throw new Error("ServerErrorCode can only be obtained for errors of type serverError");return this._serverErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpResponseStatus",{get:function(){return this._httpResponseStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cultureName",{get:function(){return this._cultureName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"correlationId",{get:function(){return this._correlationId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redirectUrl",{get:function(){return this._redirectUrl},enumerable:!0,configurable:!0}),t}(Error),s=function(){function e(e){var t=this;this._context=e,this._dispose=this._dispose.bind(this),window.addEventListener("unload",this._dispose),window._spPageOnMediaTokenReceived=function(){t._receiveMediaServiceFlushedToken()},window._spMSBTLoaded=function(){t._receiveMediaServiceFlushedToken()}}return e._getCorrelationId=function(e){return e.headers.get("sprequestguid")},e._extractRealError=function(e){return e.hasOwnProperty("error")?e.error:e},e.prototype.getOAuthToken=function(e,t){return this.getInstrumentedOAuthToken(e,t).then(function(e){if(e)return e.tokenInfo})},e.prototype.getInstrumentedOAuthToken=function(e,t){var n=this;this._receiveMediaServiceFlushedToken();var a=this._getCachedTokenData(e);if(a&&!this._isExpiring(a)){var i={token:a.accessToken,isGuest:!1,expirationTimeMs:a.expiresOn};return Promise.resolve({tokenInfo:i,spRequestId:a.correlationId,spRequestTimestamp:a.requestTimestamp})}return this._retriableFetchWithDigest(e,r.retries,t).then(function(t){return n._storeTokenData(e,t),{tokenInfo:{token:t.accessToken,isGuest:!1,expirationTimeMs:t.expiresOn},spRequestId:t.correlationId,spRequestTimestamp:t.requestTimestamp}})},e.prototype.clearCachedToken=function(e){var t=this._getCacheKey(e);window.sessionStorage.removeItem(t);var n=this._resourceKeys.indexOf(t);!isNaN(n)&&n>-1&&this._resourceKeys.splice(n)},Object.defineProperty(e.prototype,"_resourceKeys",{get:function(){return this._keysToDispose||(this._keysToDispose=new Array),this._keysToDispose},enumerable:!0,configurable:!0}),e.prototype._retriableFetchWithDigest=function(t,n,i){var r=this,s=this._context.qosMonitor(),c=Date.now();return this._context.fetchWithDigest(this._buildTokenRequest(t,i)).then(function(d){if(200!==d.status){r._context.logger.logError("fetchWithDigest failed. Server responded with "+d.statusText);var l=new o(a.unknownError,{httpResponseStatus:d.status,message:d.statusText,correlationId:e._getCorrelationId(d)});return 400!==d.status?(s.writeUnexpectedFailure("UnknownError",l),Promise.reject(l)):d.json().then(function(a){var o=e._extractRealError(a),c=r._getErrorCodeFromResponseCode(o);if(!r._isRetriableError(c)||0===n){var d=r._buildErrorFromResponse(o);return s.writeUnexpectedFailure("SharepointServerError",d),Promise.reject(d)}return r._context.logger.logError("fetchWithDigest failed. Retrying. Retries left: "+n),r._retriableFetchWithDigest(t,n-1,i)})}return r._instrumentedParseResponseData(d,s,c)})},e.prototype._getCachedTokenData=function(e){return JSON.parse(window.sessionStorage.getItem(this._getCacheKey(e)))},e.prototype._storeTokenData=function(e,t){window.sessionStorage.setItem(this._getCacheKey(e),JSON.stringify(t))},e.prototype._getCacheKey=function(e){var t=["sp-client-shared",r.npmPackageVersion,"OAuthUtility",e].join(";");return-1===this._resourceKeys.indexOf(t)&&this._resourceKeys.push(t),t},e.prototype._isExpiring=function(e){return e.expiresOn-Date.now()/1e3<r.aboutToExpireIntervalSeconds},e.prototype._isRetriableError=function(e){return-1!==r.retriableErrorCodes.indexOf(e)},e.prototype._buildTokenRequest=function(e,t){var n=new Headers;n.append("Content-Type","application/json; charset=utf-8"),n.append("Odata-Version","4.0"),n.append("Accept","application/json;odata.metadata=minimal");var a={method:"POST",headers:n,body:JSON.stringify(this._buildRequestBody(e))},i=t;return i&&i.lastIndexOf("/")===i.length-1&&(i=i.substr(0,i.length-1)),new Request(i+r.apiUrl,a)},e.prototype._buildRequestBody=function(e){return{resource:e}},e.prototype._buildErrorFromResponse=function(e){var t,n,i=this._getErrorCodeFromResponseCode(e);return void 0===i?new o(a.malformedResponseBody,{httpResponseStatus:400,message:r.unexpectedErrorCodeFormat,correlationId:e.correlationId}):(e.message&&("string"==typeof e.message?t=e.message:(t=e.message.value,n=e.message.lang)),new o(a.serverError,{httpResponseStatus:400,message:t,cultureName:n,serverErrorCode:i,correlationId:e.correlationId,redirectUrl:e["error.redirectUrl"]||e["@error.redirectUrl"]}))},e.prototype._getErrorCodeFromResponseCode=function(e){var t=e.code,n=Number(t);if(isNaN(n)&&"string"==typeof e.message){var a=t.indexOf(",");-1!==a&&(n=Number(t.substr(0,a)))}return n},e.prototype._instrumentedParseResponseData=function(t,n,i){try{return t.json().then(function(a){return n.writeSuccess(),{accessToken:a.access_token,expiresOn:Number(a.expires_on),notBefore:Number(a.not_before),resource:a.resource,tokenType:a.token_type,correlationId:e._getCorrelationId(t),requestTimestamp:i}})}catch(i){return n.writeUnexpectedFailure("ResponseParseError",i),Promise.reject(new o(a.malformedResponseBody,{httpResponseStatus:200,message:r.unexpectedTokenMessageFormat,correlationId:e._getCorrelationId(t)}))}},e.prototype._dispose=function(e){window.removeEventListener("unload",this._dispose);for(var t=0,n=this._resourceKeys;t<n.length;t++){var a=n[t];window.sessionStorage.removeItem(a)}},e.prototype._receiveMediaServiceFlushedToken=function(){if(window._spMSBT){var e={tokenType:window._spMSBT.TokenType,expiresOn:window._spMSBT.ExpiresOn,notBefore:void 0,resource:window._spMSBT.Resource,accessToken:window._spMSBT.AccessToken};this._storeTokenData(e.resource,e),window._spMSBT=void 0}},e}(),c=n("dq6a"),d=n("K9kD"),l=n("3HEj"),u=function(){function e(){this._qos=new d.Qos({name:"OAuthTokenDataSource"})}return e.prototype.writeSuccess=function(){this._qos.end({resultType:d.ResultTypeEnum.Success})},e.prototype.writeUnexpectedFailure=function(e,t){this._qos.end({resultCode:e,resultType:d.ResultTypeEnum.Failure,error:JSON.stringify(t)})},e.prototype.writeExpectedFailure=function(e,t){this._qos.end({resultCode:e,resultType:d.ResultTypeEnum.ExpectedFailure,error:JSON.stringify(t)})},e}(),f=function(){function e(){}return e.prototype.logWarning=function(e){},e.prototype.logError=function(e){},e}(),p=function(e){function t(t,n){var a=e.call(this,{},{pageContext:t})||this;return a.logger=new f,n&&(n.logger&&(a.logger=n.logger),n.useAbsoluteUrlForOAuth&&(a._useAbsoluteUrlForOAuth=n.useAbsoluteUrlForOAuth)),a._oAuthUtility=new s(a),a}return Object(i.__extends)(t,e),t.prototype.qosMonitor=function(){return new u},Object.defineProperty(t.prototype,"webUrl",{get:function(){return this._useAbsoluteUrlForOAuth?this._pageContext.webAbsoluteUrl:Object(l.n)(this._pageContext)},enumerable:!0,configurable:!0}),t.prototype.fetchWithDigest=function(e){var t=this;return e.text().then(function(n){var a=e.headers.get("Content-Type");return e.headers.delete("Content-Type"),t._odspPromiseToEs6Promise(t.getData(function(){return e.url},function(e,t){return new Response(e,{status:t.getStatus(),headers:t.getResponseHeadersDictionary()})},"DelegationTokenDataSource",function(){return n},"POST",t._getRequestHeadersDictionary(e),a,void 0,!0).then(function(e){return e},function(e){return new Response(JSON.stringify(e),{status:e.status})}))})},t.prototype.getToken=function(e,t){return t&&this._oAuthUtility.clearCachedToken(e),this._es6PromiseToOdspPromise(this._oAuthUtility.getOAuthToken(e,this.webUrl).then(function(e){return e.token}))},t.prototype.getInstrumentedToken=function(e,t){return t&&this._oAuthUtility.clearCachedToken(e),this._es6PromiseToOdspPromise(this._oAuthUtility.getInstrumentedOAuthToken(e,this.webUrl))},t.prototype._getRequestHeadersDictionary=function(e){var t=e.headers,n={};return t.forEach(function(e,t){n[t]=e}),n},t.prototype._odspPromiseToEs6Promise=function(e){return new Promise(function(t,n){e.then(function(e){t(e)},function(e){n(e)})})},t.prototype._es6PromiseToOdspPromise=function(e){return new d.Promise(function(t,n){e.then(function(e){t(e)},function(e){n(e)})})},t}(c.t);t.e=p},SYdo:function(e,t,n){"use strict";n.r(t),n.d(t,"pageMode",function(){return D}),n.d(t,"DwellTime",function(){return w}),n.d(t,"DwellTimeSignalType",function(){return a}),n.d(t,"DwellTimeTelemetry",function(){return I});var a,i,r=n("17wl"),o=n("K9kD"),s=n("dq6a"),c=n("Ddmm"),d=n("Gu0Z"),l=n("3HEj"),u={method:"POST",noRedirect:!0},f=o.Features.isFeatureEnabled({ODB:379}),p=function(e){function t(t,n){var a=e.call(this,{dataSourceName:"PageActivities"},{pageContext:t})||this;return f&&n?a._getToken=n:(a._tokenProvider=new c.e(null,{oAuthTokenDataSource:new d.e(t)}),a._getToken=function(e,t){return a._tokenProvider.getToken(e,t)}),a}return Object(r.__extends)(t,e),t.prototype.postPageActivities=function(e){var t=this,n=this._getBaseUrl(),a=new o.Qos({name:"dwellFetchToken"});return this._getToken(Object(l.a)(this._pageContext)).then(function(i){a.end({resultType:o.ResultTypeEnum.Success});var s=new o.Qos({name:"sendPageActivitiesSync"}),c=n+"/pages/oneDrive.sendActivities",d={value:e},l=t.dataRequestor.getData(Object(r.__assign)({url:c,authToken:i,qosName:"sendPageActivities",additionalPostData:JSON.stringify(d),additionalHeaders:{accept:"application/json"}},u));return s.end({resultType:o.ResultTypeEnum.Success}),l},function(e){return a.end({resultCode:e,resultType:o.ResultTypeEnum.Failure}),e})},t.prototype._getBaseUrl=function(e){var t=this._getAPIBaseUrl(e);return t+"/sites/"+new o.Uri(t).getAuthority()+","+o.Guid.normalizeLower(this._pageContext.siteId,!1)+","+o.Guid.normalizeLower(this._pageContext.webId,!1)},t.prototype._getAPIBaseUrl=function(e){return Object(l.a)(this._pageContext)+"/_api/v"+(e||"2.1")},t}(s.t),m=o.Features.isFeatureEnabled({ODB:1794}),_=o.Features.isFeatureEnabled({ODB:1795}),h=o.Features.isFeatureEnabled({ODB:1797}),b=o.Features.isFeatureEnabled({ODB:1694}),g=o.Features.isFeatureEnabled({ODB:1361}),v=o.Features.isFeatureEnabled({ODB:1727}),y=o.Features.isFeatureEnabled({ODB:1782}),S=o.Features.isFeatureEnabled({ODB:1899});!function(e){e.PageActivities="PageActivities"}(a||(a={})),function(e){e.HomePage="HomePage",e.ArticlePage="ArticlePage",e.ModernPage="ModernPage",e.ClassicPage="ClassicPage",e.NewsPage="NewsPage",e.NewsDigestPage="NewsDigestPage",e.Space="Space"}(i||(i={}));var D,I=function(){function e(){}return e.initialize=function(t,n,a,i){var r,s;if(e.disableDwellInitMonitorsKSActivated()&&(s=new o.Qos({name:"DwellTimeTelemetryInitialization"})),e.sessionId=t,e.initializationTimestamp=e.initializationTimestamp||Date.now(),e.initializeLocalStorage=!0,e.ariaKeyPrefix=n,a){e.pageContext=a,e.PageActivitiesDatSource=new p(a,i);try{var c=a.systemUserKey;if(c){var d=c.lastIndexOf("|")+1,l=-1===c.indexOf("@")?c.length:c.indexOf("@");e.userId=c.substring(d,l)}}catch(t){e._handleException(t&&t.message)}}this.sendEvents(),this._initializeForDiffIntervals("DWELL_TIME","LAST_DWELL_TIME_SENT"),m&&(this._initializeForDiffIntervals("DWELL_TIME_10_SEC","LAST_DWELL_TIME_SENT_10_SEC"),this._initializeForDiffIntervals("DWELL_TIME_1_MIN","LAST_DWELL_TIME_SENT_1_MIN"),this._initializeForDiffIntervals("DWELL_TIME_2_MIN","LAST_DWELL_TIME_SENT_2_MIN"),this._initializeForDiffIntervals("DWELL_TIME_3_MIN","LAST_DWELL_TIME_SENT_3_MIN")),_&&this._initializeForDiffIntervals("DWELL_TIME_30_SEC","LAST_DWELL_TIME_SENT_30_SEC"),e.initializeLocalStorage=!1,S&&e._isIncognitoBrowser().then(function(t){e.isIncognitoBrowser=t}),e.disableDwellInitMonitorsKSActivated()&&(null===(r=s)||void 0===r||r.end({resultType:o.ResultTypeEnum.Success}))},e.bufferDwellTimeIntervals=function(){this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME","LAST_DWELL_TIME_SENT",3e5),m&&(this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_10_SEC","LAST_DWELL_TIME_SENT_10_SEC",1e4),this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_1_MIN","LAST_DWELL_TIME_SENT_1_MIN",6e4),this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_2_MIN","LAST_DWELL_TIME_SENT_2_MIN",12e4),this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_3_MIN","LAST_DWELL_TIME_SENT_3_MIN",18e4)),_&&this._bufferDwellTimeIntervalsForDiffIntervals("DWELL_TIME_30_SEC","LAST_DWELL_TIME_SENT_30_SEC",3e4)},e.sendEvents=function(){this._sendEventsForDiffIntervals("DWELL_TIME","LAST_DWELL_TIME_SENT",3e5),m&&(this._sendEventsForDiffIntervals("DWELL_TIME_10_SEC","LAST_DWELL_TIME_SENT_10_SEC",1e4),this._sendEventsForDiffIntervals("DWELL_TIME_1_MIN","LAST_DWELL_TIME_SENT_1_MIN",6e4),this._sendEventsForDiffIntervals("DWELL_TIME_2_MIN","LAST_DWELL_TIME_SENT_2_MIN",12e4),this._sendEventsForDiffIntervals("DWELL_TIME_3_MIN","LAST_DWELL_TIME_SENT_3_MIN",18e4)),_&&this._sendEventsForDiffIntervals("DWELL_TIME_30_SEC","LAST_DWELL_TIME_SENT_30_SEC",3e4)},e.logInitialPageLoadEvent=function(t){t&&o.Engagement.withContext(e._getAriaEventContext(e.sessionId,t.extraPageData)).logData({name:"DwellTime_InitialPageLoad",currentPage:t.pageId,extraData:{pageType:t.pageType,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,t.pageId),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp,startTime:performance.now()}})},e.disableDwellInitMonitorsKSActivated=function(){return o.Killswitch.isActivated("7f3f5cda-0a1a-46dd-922e-56b5db4a7031","10/08/2020","Stage always success QoS monitors for removal.")},e._getPageActivity=function(e,t,n,a){var i=t.page.extraPageData,r=n&&n[n.length-1].stop||0;return{sharepointIds:{siteId:i&&i.siteId&&i.siteId.toString()||"",webId:i&&i.webId&&i.webId.toString()||"",listId:i&&i.listId&&i.listId.toString()||"",listItemUniqueId:t.page.pageId},webTemplateId:i&&i.webTemplateId&&i.webTemplateId.toString()||"",operation:"PageActivities",pageType:t.page.pageType||"",totalDwellTimeMs:w.calculateTotalDwellTimeFromIntervals(n),totalTimeMs:w.calculateTotalTimeFromIntervals(n),dwellFrequency:n&&n.length||0,pageReadPercentage:t.page.percentageRead,clientSessionId:e,pageMode:a,lastActivityDateTime:new Date(r).toISOString()}},e._sendAriaEvent=function(t,n,i,r,s,c){var d=n.page.extraPageData,l=i&&i[i.length-1].stop||0;o.Engagement.withContext(e._getAriaEventContext(t,n.page&&d)).logData({name:e.ariaKeyPrefix+a.PageActivities+s,currentPage:n.page.pageId,extraData:{intervals:JSON.stringify(i),totalDwellTime:w.calculateTotalDwellTimeFromIntervals(i),pageType:n.page.pageType,pageReadPercentage:n.page.percentageRead,totalTime:w.calculateTotalTimeFromIntervals(i),dwellFrequency:i&&i.length||0,pageMode:r,lastActivityDateTime:l?new Date(l).toISOString():"",dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(t,c,n.page.pageId),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:c}})},e._getAriaEventContext=function(e,t){var n={"AppInfo.Session":e};return t&&(t.siteId&&(n.SiteId=t.siteId.toString()),t.webId&&(n.WebId=t.webId.toString()),t.webTemplateId&&(n.WebTemplateId=t.webTemplateId.toString()),t.listId&&(n.ListId=t.listId.toString())),n},e._validateStorgeSizeAndCleanup=function(t,n,a){var i=localStorage.getItem(t);i&&2*i.length>=51200&&e._sendEventsForDiffIntervals(t,n,a,!0)},e._initializeForDiffIntervals=function(t,n){var a,i;if(e.disableDwellInitMonitorsKSActivated()&&(i=new o.Qos({name:"DwellLocalStorageSet"+t})),!e.initializeLocalStorage&&!localStorage.getItem(t)){var r=w.getDwellTimeSettings()&&w.getDwellTimeSettings().page&&w.getDwellTimeSettings().page.pageId;o.Engagement.logData({name:"Dwell_Time_LocalStorage_Cleared",currentPage:r,extraData:{key:t,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,r),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}})}var s=localStorage.getItem(t)||"{}",c=JSON.parse(s);c[e.sessionId]||(c[e.sessionId]={},c[e.sessionId].initializationTimestamp=e.initializationTimestamp,e._localStorageSetItem(t,JSON.stringify(c))),localStorage.getItem(n)||e._localStorageSetItem(n,Date.now().toString()),e.disableDwellInitMonitorsKSActivated()&&(null===(a=i)||void 0===a||a.end({resultType:o.ResultTypeEnum.Success}))},e._bufferDwellTimeIntervalsForDiffIntervals=function(t,n,a,i){e._validateStorgeSizeAndCleanup(t,n,a),e._initializeForDiffIntervals(t,n);var r=localStorage.getItem(t);if(r){var o=JSON.parse(r);o[e.sessionId][w.getPageId()]||(o[e.sessionId][w.getPageId()]={readIntervals:[],editIntervals:[],page:w.getDwellTimeSettings().page});var s=o[e.sessionId][w.getPageId()].percentageRead;s&&w.getPageReadPercentage()>s&&(o[e.sessionId][w.getPageId()].percentageRead=w.getPageReadPercentage()),w.isEditMode()?Array.prototype.push.apply(o[e.sessionId][w.getPageId()].editIntervals,w.getDwellTimeEditIntervals()):Array.prototype.push.apply(o[e.sessionId][w.getPageId()].readIntervals,w.getDwellTimeReadIntervals()),e._localStorageSetItem(t,JSON.stringify(o))||i||(e._sendEventsForDiffIntervals(t,n,a,!0),e._bufferDwellTimeIntervalsForDiffIntervals(t,n,a,!0))}},e._sendEventsForDiffIntervals=function(t,n,a,i){var r,s;e.disableDwellInitMonitorsKSActivated()&&(s=new o.Qos({name:"DwellSendEvents"+t}));var c=localStorage.getItem(n);if(Date.now()-(c?parseInt(c,10):0)>a||i){var d=localStorage.getItem(t);if(d){this._sendStorageSizeEvent(a,d);var l=JSON.parse(d),u=[],f=e.pageContext&&3e5===a;for(var p in l)if(l.hasOwnProperty(p)){var m=l[p];if(m){var _=m.initializationTimestamp;for(var h in m)if(m.hasOwnProperty(h)&&"initializationTimestamp"!==h){var b=m[h],g=b.page.pageType;if(this._isAriaEnabled(g)){var v=3e5===a?"":"."+a/1e3+"s";b.editIntervals&&b.editIntervals.length>0&&e._sendAriaEvent(p,b,b.editIntervals,D.EDIT,v,_),b.readIntervals&&b.readIntervals.length>0&&e._sendAriaEvent(p,b,b.readIntervals,D.READ,v,_)}f&&this._isSPOEnabled(g)&&(b.editIntervals&&b.editIntervals.length>0&&u.push(e._getPageActivity(p,b,b.editIntervals,D.EDIT)),b.readIntervals&&b.readIntervals.length>0&&u.push(e._getPageActivity(p,b,b.readIntervals,D.READ)))}}}u.length>0&&e.PageActivitiesDatSource.postPageActivities(u)}e._localStorageSetItem(t,"{}"),e._localStorageSetItem(n,Date.now().toString())}e.disableDwellInitMonitorsKSActivated()&&(null===(r=s)||void 0===r||r.end({resultType:o.ResultTypeEnum.Success}))},e._sendStorageSizeEvent=function(t,n){if(h&&3e5===t){var a=2*n.length,i=w.getDwellTimeSettings()&&w.getDwellTimeSettings().page&&w.getDwellTimeSettings().page.pageId;o.Engagement.logData({name:"Dwell_Storage_Size",currentPage:i,extraData:{storageSize:a,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,i),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}})}},e._isAriaEnabled=function(e){switch(e){case i.NewsPage:case i.HomePage:return b;case i.ArticlePage:return v;default:return!1}},e._isSPOEnabled=function(e){switch(e){case i.NewsPage:case i.HomePage:return g;case i.ArticlePage:return y;default:return!1}},e._localStorageSetItem=function(t,n){try{return localStorage.setItem(t,n),!0}catch(d){var a=2*n.length/1024,i=e._getLocalStorageSize(),r=w.getDwellTimeSettings()&&w.getDwellTimeSettings().page,s=r&&r.extraPageData,c=r&&r.pageId;return o.Engagement.withContext(e._getAriaEventContext(e.sessionId,s)).logData({name:"Dwell_Time_SetItem_Failed",currentPage:c,extraData:{key:t,dwellKeySize:a,localStorageSize:i,message:d&&d.message,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,c),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}}),!1}},e._getLocalStorageSize=function(){var e="";for(var t in window.localStorage)window.localStorage.hasOwnProperty(t)&&(e+=t+window.localStorage[t]);return e?2*e.length/1024:0},e._getUniqueKeyIdentifier=function(t,n,a){var i=t;return e.userId&&(i=i+"_"+e.userId),n&&(i=i+"_"+n),a&&(i=i+"_"+a),i},e._isIncognitoBrowser=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(t){switch(t.label){case 0:return"storage"in navigator&&"estimate"in navigator.storage?[4,navigator.storage.estimate()]:[3,2];case 1:return void 0!==(e=t.sent().quota)&&e<12e7?[2,!0]:[2,!1];case 2:return[2,!1];case 3:return[2]}})})},e._handleException=function(t){var n=w.getDwellTimeSettings()&&w.getDwellTimeSettings().page,a=n&&n.extraPageData,i=n&&n.pageId;o.Engagement.withContext(e._getAriaEventContext(e.sessionId,a)).logData({name:"Dwell_Time_Exception",currentPage:i,extraData:{message:t,dwellLibVersion:2,uniqueKeyIdentifier:e._getUniqueKeyIdentifier(e.sessionId,e.initializationTimestamp,i),incognitoBrowser:e.isIncognitoBrowser,sessionInitTime:e.initializationTimestamp}})},e}(),x=o.Features.isFeatureEnabled({ODB:674});!function(e){e.READ="READ",e.EDIT="EDIT"}(D||(D={}));var C=["scroll","resize"],O=["keyup","keydown","touchstart","click","contextmenu"],w=function(){function e(){}return e.initialize=function(t){var n,a;I.disableDwellInitMonitorsKSActivated()&&(a=new o.Qos({name:"DwellTimeLibraryInitialization"})),e.reset(),e.running=!1,e.pageReadPercentage=0,e.idle=!1,e.readIntervals=[],e.editIntervals=[],e.currentIdleTimeMs=0,e.dwellTimeSettings=t,e.mouseInactiveTime=t.mouseInactiveTime||3e4,e.checkCallbacksIntervalMs=100,e.totalEditDwellTime=0,e.totalReadDwellTime=0,e.historyPushState=history.pushState,e.historyReplaceState=history.replaceState,e.extraPageData=t.page.extraPageData,e._registerEventListeners(),e.startTimer(),I.logInitialPageLoadEvent(t.page),I.disableDwellInitMonitorsKSActivated()&&(null===(n=a)||void 0===n||n.end({resultType:o.ResultTypeEnum.Success}))},e.isRunning=function(){return this.running},e.startTimer=function(){e.checkCallbackIntervalId||e._checkCallbacksOnInterval();var t=e._getIntervals(),n=t[t.length-1];n&&null===n.stop||(t.push({start:Date.now(),stop:null}),e.running=!0)},e.stopTimer=function(){var t=e._getIntervals();t.length&&(t[t.length-1].stop=Date.now(),e.running=!1,(e.dwellTimeSettings.sendAriaEvents||e.dwellTimeSettings.sendSPOEvents)&&(I.bufferDwellTimeIntervals(),e._updateTotalEditDwellTime(),e._updateTotalReadDwellTime(),e.readIntervals=[],e.editIntervals=[],I.sendEvents()))},e.getTimeInMilliseconds=function(){return e.getEditDwellTimeInMilliseconds()+e.getReadDwellTimeInMilliseconds()},e.getEditDwellTimeInMilliseconds=function(){return e.totalEditDwellTime+e.calculateTotalDwellTimeFromIntervals(e.editIntervals)},e.getReadDwellTimeInMilliseconds=function(){return e.totalReadDwellTime+e.calculateTotalDwellTimeFromIntervals(e.readIntervals)},e.calculateTotalDwellTimeFromIntervals=function(e){return e.length>0?e.reduce(function(e,t){return t.stop?e+=t.stop-t.start:e+=Date.now()-t.start,e},0):0},e.calculateTotalTimeFromIntervals=function(e){if(e&&e.length>0){var t=e[e.length-1],n=e[0];if(t.stop)return t.stop-n.start}return 0},e.getTimeInSeconds=function(t){return t?Number((e.getTimeInMilliseconds()/1e3).toFixed(t)):e.getTimeInMilliseconds()/1e3},e.isEditMode=function(){return!(!e.extraPageData||!e.extraPageData.pageMode||e.extraPageData.pageMode!==D.EDIT)},e.getDwellTimeEditIntervals=function(){return e.editIntervals},e.reset=function(){e.isRunning()&&e.stopTimer(),e.readIntervals=[],e.editIntervals=[],e._destroy()},e.getDwellTimeReadIntervals=function(){return e.readIntervals},e.getPageId=function(){return e.dwellTimeSettings.page.pageId},e.getPageReadPercentage=function(){return e.pageReadPercentage},e.getDwellTimeSettings=function(){return e.dwellTimeSettings},e.registerScrollListener=function(t){if(t){e.scrollDivClass=t;var n=document.getElementsByClassName(t);n&&n[0]&&(n[0].addEventListener("scroll",e._findPageReadPercentage,{passive:!0}),n[0].addEventListener("scroll",e._onBrowserTabInactive,{passive:!0}))}},e.updatePageMode=function(t){e.stopTimer(),e.extraPageData||(e.extraPageData={}),e.extraPageData.pageMode=t,e.startTimer()},e.isEditDwellTimeKSActivated=function(){return!1},e._getIntervals=function(){return e.isEditMode()?e.editIntervals:e.readIntervals},e._updateTotalEditDwellTime=function(){e.totalEditDwellTime=e.getEditDwellTimeInMilliseconds()},e._updateTotalReadDwellTime=function(){e.totalReadDwellTime=e.getReadDwellTimeInMilliseconds()},e._onBrowserTabInactive=function(t){e.running&&e.stopTimer()},e._onBrowserTabActive=function(t){e.running||e.startTimer()},e._resetIdleTime=function(t){e.idle&&e.startTimer(),e.idle=!1,e.currentIdleTimeMs=0},e._resetIdleTimeWithStartTimer=function(t){e._resetIdleTime(t),e.running||e.startTimer()},e._registerEventListeners=function(){var t={passive:!0};window.addEventListener("blur",e._onBrowserTabInactive,t),window.addEventListener("focus",e._onBrowserTabActive,t),window.addEventListener("unload",e._onBrowserTabInactive,t),C.forEach(function(n){window.addEventListener(n,e._resetIdleTime,t)}),document.body.addEventListener("mouseleave",e._onBrowserTabInactive,t),document.addEventListener("mousemove",e._resetIdleTimeWithStartTimer,t),O.forEach(function(n){document.addEventListener(n,e._resetIdleTime,t)}),e._addLocationChangeListener()},e._dwellPushState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=e.historyPushState.apply(history,t);if(e.isRunning()){var i=document.createEvent("Event");i.initEvent("locationChange",!0,!0),window.dispatchEvent(i)}return a},e._dwellReplaceState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=e.historyReplaceState.apply(history,t);if(e.isRunning()){var i=document.createEvent("Event");i.initEvent("locationChange",!0,!0),window.dispatchEvent(i)}return a},e._addLocationChangeListener=function(){var t={passive:!0};x&&(history.pushState=e._dwellPushState,history.replaceState=e._dwellReplaceState),window.addEventListener("popstate",e._onBrowserTabInactive,t),window.addEventListener("locationChange",e._onBrowserTabInactive,t)},e._checkCallbacksOnInterval=function(){e.checkCallbackIntervalId=window.setInterval(function(){e.currentIdleTimeMs>=e.mouseInactiveTime&&e.running?(e.idle=!0,e.stopTimer()):e.currentIdleTimeMs+=e.checkCallbacksIntervalMs},e.checkCallbacksIntervalMs)},e._destroy=function(){e._unregisterEventListeners(),e.checkCallbackIntervalId&&(window.clearInterval(e.checkCallbackIntervalId),e.checkCallbackIntervalId=0),x&&e.historyPushState&&e.historyReplaceState&&(history.pushState===e._dwellPushState&&(history.pushState=e.historyPushState),history.replaceState===e._dwellReplaceState&&(history.replaceState=e.historyReplaceState))},e._unregisterEventListeners=function(){if(window.removeEventListener("blur",e._onBrowserTabInactive),window.removeEventListener("popstate",e._onBrowserTabInactive),window.removeEventListener("locationChange",e._onBrowserTabInactive),window.removeEventListener("unload",e._onBrowserTabInactive),window.removeEventListener("focus",e._onBrowserTabActive),C.forEach(function(t){window.removeEventListener(t,e._resetIdleTime)}),document.body.removeEventListener("mouseleave",e._onBrowserTabInactive),document.removeEventListener("mousemove",e._resetIdleTimeWithStartTimer),O.forEach(function(t){document.removeEventListener(t,e._resetIdleTime)}),e.scrollDivClass){var t=document.getElementsByClassName(e.scrollDivClass);t&&t[0]&&(t[0].removeEventListener("scroll",e._findPageReadPercentage),t[0].removeEventListener("scroll",e._onBrowserTabInactive))}},e._findPageReadPercentage=function(t){var n=t.target,a=n.clientHeight,i=n.scrollHeight-a,r=n.scrollTop;if(0===r&&0===i)return 100;var o=Math.floor(r/i*100);return o>e.pageReadPercentage&&(e.pageReadPercentage=o),o},e}()},qkfK:function(e,t){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,r="ArrayBuffer"in e;if(r)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},c=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};m.prototype.append=function(e,t){e=u(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},m.prototype.delete=function(e){delete this.map[u(e)]},m.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},m.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},m.prototype.set=function(e,t){this.map[u(e)]=f(t)},m.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},m.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),p(e)},m.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},m.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),p(e)},n&&(m.prototype[Symbol.iterator]=m.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},v.call(y.prototype),v.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},D.error=function(){var e=new D(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];D.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new D(null,{status:t,headers:{location:e}})},e.Headers=m,e.Request=y,e.Response=D,e.fetch=function(e,t){return new Promise(function(n,i){var r=new y(e,t),o=new XMLHttpRequest;o.onload=function(){var e,t,a={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new m,e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),a=n.shift().trim();if(a){var i=n.join(":").trim();t.append(a,i)}}),t)};a.url="responseURL"in o?o.responseURL:a.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;n(new D(i,a))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&a&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function m(e){this.map={},e instanceof m?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function _(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function b(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(a&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(r&&a&&s(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!r||!ArrayBuffer.prototype.isPrototypeOf(e)&&!c(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=_(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var e,t,n,a=_(this);if(a)return a;if(this._bodyBlob)return e=this._bodyBlob,n=h(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),a=0;a<t.length;a++)n[a]=String.fromCharCode(t[a]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(e,t){var n,a,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new m(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new m(t.headers)),this.method=(a=(n=t.method||this.method||"GET").toUpperCase(),d.indexOf(a)>-1?a:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function S(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),a=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(a),decodeURIComponent(i))}}),t}function D(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new m(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)}}]);